<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DN Order Tracking System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        'brand-bg': '#FFB7C5', // Pink background luar
                        'card-bg': '#FFFFFF',
                        'accent-pink': '#FF8FA3', // Warna tombol/highlight
                        'soft-pink': '#FFF0F3',
                        'text-dark': '#333333',
                        'text-gray': '#888888',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #FF9EAA; /* Warna background utama sesuai gambar */
        }
        .glass-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        /* Custom Scrollbar for table */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #FF8FA3;
            border-radius: 4px;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <div class="max-w-7xl mx-auto space-y-6">

        <div class="glass-card p-8">
            <h1 class="text-3xl font-bold text-gray-800">Target Vs Realization Create DN Local Order Brown Paper</h1>
            <p class="text-gray-400 mt-1">DN Order Tracking System</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <div class="glass-card p-6 col-span-1 lg:col-span-2">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold flex items-center gap-2">
                        <span class="bg-blue-100 text-blue-500 p-2 rounded-lg"><i class="fa-regular fa-calendar"></i></span>
                        Order Calendar
                    </h2>
                    <div class="flex items-center gap-4">
                        <button class="w-8 h-8 rounded bg-brand-bg text-white hover:opacity-80"><i class="fa-solid fa-chevron-left"></i></button>
                        <span class="font-bold text-gray-700">December 2025</span>
                        <button class="w-8 h-8 rounded bg-brand-bg text-white hover:opacity-80"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>

                <div class="grid grid-cols-7 gap-2 text-center text-sm mb-2 font-bold text-gray-400">
                    <div>SUN</div><div>MON</div><div>TUE</div><div>WED</div><div>THU</div><div>FRI</div><div>SAT</div>
                </div>
                <div class="grid grid-cols-7 gap-2 text-center" id="calendar-grid">
                    <div class="p-4 text-gray-300">30</div>
                    <div class="p-4 bg-accent-pink text-white rounded-xl shadow-md transform scale-105 font-bold">1</div>
                    <div class="p-4 font-medium">2</div>
                    <div class="p-4 font-medium">3</div>
                    <div class="p-4 font-medium">4</div>
                    <div class="p-4 font-medium">5</div>
                    <div class="p-4 bg-red-100 text-red-500 rounded-xl">6</div> <div class="p-4 bg-red-100 text-red-500 rounded-xl">7</div>
                    <div class="p-4 font-medium">8</div>
                    <div class="p-4 font-medium">9</div>
                    <div class="p-4 font-medium">10</div>
                    <div class="p-4 font-medium">11</div>
                    <div class="p-4 font-medium">12</div>
                    <div class="p-4 bg-red-100 text-red-500 rounded-xl">13</div>

                    <div class="p-4 bg-red-100 text-red-500 rounded-xl">14</div>
                    <div class="p-4 font-medium">15</div>
                    <div class="p-4 font-medium">16</div>
                    <div class="p-4 font-medium">17</div>
                    <div class="p-4 font-medium">18</div>
                    <div class="p-4 font-medium">19</div>
                    <div class="p-4 bg-red-100 text-red-500 rounded-xl">20</div>
                </div>
            </div>

            <div class="glass-card p-6">
                <h2 class="text-xl font-bold flex items-center gap-2 mb-6">
                    <span class="text-2xl">ðŸŽ¨</span> Choose Theme
                </h2>
                <div class="grid grid-cols-3 gap-4">
                    <div class="flex flex-col items-center gap-2 cursor-pointer">
                        <div class="w-full aspect-video bg-pink-300 rounded-lg border-4 border-gray-700 shadow-sm"></div>
                        <span class="text-xs font-bold">Pink Blossom</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer opacity-60 hover:opacity-100">
                        <div class="w-full aspect-video bg-green-300 rounded-lg"></div>
                        <span class="text-xs">Mint Fresh</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer opacity-60 hover:opacity-100">
                        <div class="w-full aspect-video bg-purple-300 rounded-lg"></div>
                        <span class="text-xs">Lavender</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer opacity-60 hover:opacity-100">
                        <div class="w-full aspect-video bg-orange-300 rounded-lg"></div>
                        <span class="text-xs">Peach Sunset</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer opacity-60 hover:opacity-100">
                        <div class="w-full aspect-video bg-blue-300 rounded-lg"></div>
                        <span class="text-xs">Sky Blue</span>
                    </div>
                    <div class="flex flex-col items-center gap-2 cursor-pointer opacity-60 hover:opacity-100">
                        <div class="w-full aspect-video bg-yellow-200 rounded-lg"></div>
                        <span class="text-xs">Lemon Zest</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-card p-4 flex flex-col md:flex-row gap-4 items-center">
            <div class="flex items-center gap-2 text-lg font-bold w-full md:w-auto min-w-[150px]">
                <i class="fa-solid fa-magnifying-glass text-blue-500"></i> Search & Filter
            </div>
            
            <div class="relative flex-grow w-full">
                <i class="fa-solid fa-magnifying-glass absolute left-3 top-3 text-gray-400"></i>
                <input type="text" placeholder="Search by customer, destination, type..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-accent-pink transition">
            </div>

            <select class="p-2 border border-gray-200 rounded-lg bg-white w-full md:w-auto text-gray-600">
                <option>All Months</option>
            </select>
            <select class="p-2 border border-gray-200 rounded-lg bg-white w-full md:w-auto text-gray-600">
                <option>All Dates</option>
            </select>
            <select class="p-2 border border-gray-200 rounded-lg bg-white w-full md:w-auto text-gray-600">
                <option>All Types</option>
            </select>
        </div>

        <div class="glass-card p-6">
            <h2 class="text-xl font-bold mb-4">Add New DN Order</h2>
            
            <form id="orderForm" class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end">
                <div class="col-span-1">
                    <label class="block text-xs font-bold text-gray-500 mb-1">Date</label>
                    <input type="date" id="inputDate" value="2025-12-01" class="w-full p-2 border border-gray-200 rounded-lg focus:border-accent-pink focus:outline-none">
                </div>

                <div class="col-span-1">
                    <label class="block text-xs font-bold text-gray-500 mb-1">Order Type</label>
                    <select id="inputType" class="w-full p-2 border border-gray-200 rounded-lg focus:border-accent-pink focus:outline-none bg-white">
                        <option value="">Select Type</option>
                        <option value="BU 17">BU 17</option>
                        <option value="CMI">CMI</option>
                    </select>
                </div>

                <div class="col-span-1">
                    <label class="block text-xs font-bold text-gray-500 mb-1">Customer Name</label>
                    <input type="text" id="inputCustomer" placeholder="Enter customer name" class="w-full p-2 border border-gray-200 rounded-lg focus:border-accent-pink focus:outline-none">
                </div>

                <div class="col-span-1">
                    <label class="block text-xs font-bold text-gray-500 mb-1">Destination</label>
                    <input type="text" id="inputDest" placeholder="Enter destination" class="w-full p-2 border border-gray-200 rounded-lg focus:border-accent-pink focus:outline-none">
                </div>

                <div class="col-span-1 relative">
                    <label class="block text-xs font-bold text-gray-500 mb-1">Target DN (MT)</label>
                    <input type="number" id="inputTarget" placeholder="Enter target" class="w-full p-2 border border-gray-200 rounded-lg focus:border-accent-pink focus:outline-none">
                    <p class="text-[10px] text-gray-400 mt-1">Auto-rounds: 21â†’20, 23â†’25, 51â†’50, 53â†’55</p>
                </div>

                <div class="col-span-1 md:col-span-1 md:col-start-1 mt-4">
                    <button type="submit" class="bg-accent-pink hover:bg-pink-400 text-white font-bold py-2 px-6 rounded-lg shadow-lg flex items-center gap-2 transition w-full justify-center">
                        <i class="fa-solid fa-plus"></i> ADD ORDER
                    </button>
                </div>
            </form>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="glass-card p-6 border-l-4 border-accent-pink flex flex-col justify-center">
                <span class="text-xs font-bold text-gray-400 uppercase tracking-wider">TOTAL TARGET BU 17</span>
                <span id="totalBU17" class="text-3xl font-bold text-gray-800 mt-2">0.00</span>
            </div>
            <div class="glass-card p-6 border-l-4 border-teal-400 flex flex-col justify-center">
                <span class="text-xs font-bold text-gray-400 uppercase tracking-wider">TOTAL TARGET CMI</span>
                <span id="totalCMI" class="text-3xl font-bold text-gray-800 mt-2">0.00</span>
            </div>
            <div class="glass-card p-6 border-l-4 border-yellow-400 flex flex-col justify-center">
                <span class="text-xs font-bold text-gray-400 uppercase tracking-wider">TOTAL ALL TARGET</span>
                <span id="totalAll" class="text-3xl font-bold text-gray-800 mt-2">0.00</span>
            </div>
        </div>

        <div class="glass-card p-6 mb-10">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold flex items-center gap-2">
                    <span class="text-blue-500"><i class="fa-solid fa-table-list"></i></span>
                    DN Orders Data
                </h2>
                <div class="flex gap-2">
                    <button class="px-4 py-2 bg-purple-400 text-white rounded-lg text-xs font-bold hover:bg-purple-500"><i class="fa-solid fa-print"></i> PRINT PREVIEW</button>
                    <button class="px-4 py-2 bg-blue-400 text-white rounded-lg text-xs font-bold hover:bg-blue-500"><i class="fa-solid fa-download"></i> DOWNLOAD</button>
                </div>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-accent-pink text-white text-xs uppercase">
                            <th class="p-3 rounded-l-lg">Date</th>
                            <th class="p-3">Type</th>
                            <th class="p-3">Customer Name</th>
                            <th class="p-3">Destination</th>
                            <th class="p-3">Target DN (MT)</th>
                            <th class="p-3 rounded-r-lg text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody" class="text-sm text-gray-600">
                        <tr class="border-b border-gray-100 hover:bg-gray-50 transition">
                            <td class="p-4" colspan="6" class="text-center text-gray-400">No data available yet.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <script>
        // 1. Logic for Auto-Rounding Target Input
        const targetInput = document.getElementById('inputTarget');
        
        targetInput.addEventListener('blur', function() {
            let val = parseFloat(this.value);
            if (!isNaN(val)) {
                // Logic pembulatan sederhana sesuai note (ujung 1/2 -> 0, ujung 3/4 -> 5, dll)
                // Ini logika simplifikasi untuk demo:
                // Jika ends with 1 or 2 -> round down to 0
                // Jika ends with 3 or 4 -> round up to 5
                // Jika ends with 6 or 7 -> round down to 5
                // Jika ends with 8 or 9 -> round up to 10 (next 0)
                
                let remainder = val % 5;
                let rounded = 0;

                // Menggunakan Math.round ke kelipatan 5 terdekat
                rounded = Math.round(val / 5) * 5;
                
                this.value = rounded;
            }
        });

        // 2. Logic for Adding Data to Table & Updating Totals
        const form = document.getElementById('orderForm');
        const tableBody = document.getElementById('tableBody');
        let orders = [];

        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // Get Values
            const date = document.getElementById('inputDate').value;
            const type = document.getElementById('inputType').value;
            const customer = document.getElementById('inputCustomer').value;
            const dest = document.getElementById('inputDest').value;
            const target = parseFloat(document.getElementById('inputTarget').value) || 0;

            if(!type || !customer) {
                alert("Please fill in required fields");
                return;
            }

            // Add to Array
            orders.push({ date, type, customer, dest, target });

            // Render Table
            renderTable();
            
            // Update Totals
            updateTotals();

            // Reset Form (kecuali tanggal)
            document.getElementById('inputCustomer').value = '';
            document.getElementById('inputDest').value = '';
            document.getElementById('inputTarget').value = '';
        });

        function renderTable() {
            if (orders.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="p-4 text-center text-gray-400">No data available.</td></tr>';
                return;
            }

            let html = '';
            orders.forEach((order, index) => {
                html += `
                <tr class="border-b border-gray-100 hover:bg-pink-50 transition animate-fade-in">
                    <td class="p-3 font-medium text-gray-800">${order.date}</td>
                    <td class="p-3"><span class="bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs font-bold">${order.type}</span></td>
                    <td class="p-3 font-bold">${order.customer}</td>
                    <td class="p-3">${order.dest}</td>
                    <td class="p-3 font-bold text-accent-pink">${order.target.toFixed(2)}</td>
                    <td class="p-3 text-center">
                        <button onclick="deleteOrder(${index})" class="text-red-400 hover:text-red-600 transition"><i class="fa-solid fa-trash"></i></button>
                    </td>
                </tr>
                `;
            });
            tableBody.innerHTML = html;
        }

        function deleteOrder(index) {
            orders.splice(index, 1);
            renderTable();
            updateTotals();
        }

        function updateTotals() {
            let bu17 = 0;
            let cmi = 0;

            orders.forEach(o => {
                if (o.type === 'BU 17') bu17 += o.target;
                if (o.type === 'CMI') cmi += o.target;
            });

            const total = bu17 + cmi;

            // Animasi angka (simple)
            document.getElementById('totalBU17').innerText = bu17.toFixed(2);
            document.getElementById('totalCMI').innerText = cmi.toFixed(2);
            document.getElementById('totalAll').innerText = total.toFixed(2);
        }
    </script>
</body>
</html>